import{d as m,r as a}from"./index.BUY9SMGD.js";import{af as h,y as b}from"./scheduler.D_DiFEDa.js";function g(e){return Object.keys(e).reduce((r,n)=>e[n]===void 0?r:r+`${n}:${e[n]};`,"")}g({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});const U=typeof document<"u",l=e=>typeof e=="function";function p(e){return e instanceof HTMLElement}function v(e){return e!==null&&typeof e=="object"}function A(e){return v(e)&&"subscribe"in e}function k(...e){return(...r)=>{for(const n of e)typeof n=="function"&&n(...r)}}function L(){}function y(e,r,n,s){const u=Array.isArray(r)?r:[r];return u.forEach(t=>e.addEventListener(t,n,s)),()=>{u.forEach(t=>e.removeEventListener(t,n,s))}}function W(e,r,n,s){const u=Array.isArray(r)?r:[r];if(typeof n=="function"){const t=M(i=>n(i));return u.forEach(i=>e.addEventListener(i,t,s)),()=>{u.forEach(i=>e.removeEventListener(i,t,s))}}return()=>void 0}function w(e){const r=e.currentTarget;if(!p(r))return null;const n=new CustomEvent(`m-${e.type}`,{detail:{originalEvent:e},cancelable:!0});return r.dispatchEvent(n),n}function M(e){return r=>{const n=w(r);if(!(n!=null&&n.defaultPrevented))return e(r)}}const S={ENTER:"Enter",ESCAPE:"Escape",SPACE:" "},E=e=>{try{h(e)}catch{return e()}};function C(e,r){let n=[];const s=c=>{n.push(c)},u=()=>{n.forEach(c=>c()),n=[]},t=m(e,c=>(u(),r(c,s)));return E(u),{...t,subscribe:(...c)=>{const o=t.subscribe(...c);return()=>{o(),u()}}}}function T(e,r){const n=C(e,(s,u)=>({stores:s,onUnsubscribe:u})).subscribe(({stores:s,onUnsubscribe:u})=>{const t=r(s);t&&u(t)});return E(n),n}const $=a(void 0,e=>{function r(s){e(s),e(void 0)}return y(document,"pointerup",r,{passive:!1,capture:!0})}),_=(e,r={})=>{let n={enabled:!0,...r};function s(){return typeof n.enabled=="boolean"?n.enabled:b(n.enabled)}const u=$.subscribe(t=>{var c;if(!s()||!t||t.target===e)return;const i=t.composedPath();if(!i.includes(e)){if(n.ignore){if(l(n.ignore)){if(n.ignore(t))return}else if(Array.isArray(n.ignore)&&n.ignore.length>0&&n.ignore.some(o=>o&&(t.target===o||i.includes(o))))return}(c=n.handler)==null||c.call(n,t)}});return{update(t){n={...n,...t}},destroy(){u()}}},P=a(void 0,e=>{function r(s){s&&s.key===S.ESCAPE&&e(s),e(void 0)}return y(document,"keydown",r,{passive:!1})}),B=(e,r={})=>{let n=L;function s(u={}){n();const t={enabled:!0,...u},i=A(t.enabled)?t.enabled:a(t.enabled);n=k(P.subscribe(c=>{var f;if(!c||!b(i))return;const o=c.target;if(!(!p(o)||o.closest("[data-escapee]")!==e)){if(c.preventDefault(),t.ignore){if(l(t.ignore)){if(t.ignore(c))return}else if(Array.isArray(t.ignore)&&t.ignore.length>0&&t.ignore.some(d=>d&&o===d))return}(f=t.handler)==null||f.call(t,c)}}),T(i,c=>{c?e.dataset.escapee="":delete e.dataset.escapee}))}return s(r),{update:s,destroy(){e.removeAttribute("data-escapee"),n()}}};function j(){}function D(e,r,n,s){const u=Array.isArray(r)?r:[r];return u.forEach(t=>e.addEventListener(t,n,s)),()=>{u.forEach(t=>e.removeEventListener(t,n,s))}}function H(...e){return(...r)=>{for(const n of e)typeof n=="function"&&n(...r)}}const K=a(void 0,e=>{function r(s){s&&s.key==="Escape"&&e(s),e(void 0)}return D(document,"keydown",r,{passive:!1})});function F(e,r){let n=j;function s(u){n(),n=H(K.subscribe(t=>{if(!t)return;const i=t.target;!O(i)||i.closest("[data-escapee]")!==e||(t.preventDefault(),u(t))})),e.setAttribute("data-escapee","")}return s(r),()=>{n(),e.removeAttribute("data-escapee")}}function O(e){return e instanceof HTMLElement}export{l as a,k as b,W as c,_ as d,T as e,U as f,H as g,D as h,p as i,F as j,S as k,j as l,L as n,g as s,B as u};

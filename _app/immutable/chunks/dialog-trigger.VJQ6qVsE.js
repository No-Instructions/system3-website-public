import{L as Pe,ad as Ne,Q as Me,s as Z,l as I,u as R,m as U,o as V,k as x,z as N,d as M,w as de,A as j,i as H,W as fe,C as q,c as _e,e as ge,h as be,P as w,D as z,E as me,T as pe}from"./scheduler.D_DiFEDa.js";import{S as $,i as ee,t as C,a as E,g as he,f as ke}from"./index.uqldPLAT.js";import{w as Be,d as ye}from"./index.BUY9SMGD.js";import{g as Oe}from"./spread.CgU5AtxT.js";import{t as te,o as Ie,w as Re,y as Ue,l as Ve,m as S,p as Ke,z as P,d as Le,n as T,k as Y,c as L,q as W,b as ne,u as oe,x as se,A as We}from"./index.B0FfbRil.js";import{c as Ce}from"./events.BMfxwV7f.js";import{r as je,u as qe,c as we}from"./action.Cp6XCI_P.js";import{g as ze,u as He}from"./portal.vB7B65qR.js";import{h as le}from"./focus._U59ti9-.js";import{r as Ge,c as Qe,g as Je}from"./updater.Dth1Bj6g.js";const{name:A}=Ke("dialog"),Xe={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Ye=["content","title","description"];function Ze(t){const e={...Xe,...t},n=te(Ie(e,"ids")),{preventScroll:o,closeOnEscape:s,closeOnOutsideClick:u,role:i,portal:g,forceVisible:r,openFocus:l,closeFocus:c,onOutsideClick:h}=n,k=Re.writable(null),m=te({...Ue(Ye),...e.ids}),y=e.open??Be(e.defaultOpen),p=Ve(y,e==null?void 0:e.onOpenChange),d=ye([p,r],([a,b])=>a||b);let v=T;function B(a){const b=a.currentTarget,_=a.currentTarget;!ne(b)||!ne(_)||(p.set(!0),k.set(_))}function f(){p.set(!1),le({prop:c.get(),defaultEl:k.get()})}const G=S(A("trigger"),{stores:[p],returned:([a])=>({"aria-haspopup":"dialog","aria-expanded":a,type:"button"}),action:a=>({destroy:Y(L(a,"click",_=>{B(_)}),L(a,"keydown",_=>{_.key!==W.ENTER&&_.key!==W.SPACE||(_.preventDefault(),B(_))}))})}),Q=S(A("overlay"),{stores:[d,p],returned:([a,b])=>({hidden:a?void 0:!0,tabindex:-1,style:se({display:a?void 0:"none"}),"aria-hidden":!0,"data-state":b?"open":"closed"}),action:a=>{let b=T;if(s.get()){const _=oe(a,{handler:()=>{f()}});_&&_.destroy&&(b=_.destroy)}return{destroy(){b()}}}}),Fe=S(A("content"),{stores:[d,m.content,m.description,m.title,p],returned:([a,b,_,D,O])=>({id:b,role:i.get(),"aria-describedby":_,"aria-labelledby":D,"aria-modal":a?"true":void 0,"data-state":O?"open":"closed",tabindex:-1,hidden:a?void 0:!0,style:se({display:a?void 0:"none"})}),action:a=>{let b=T,_=T;const D=Y(P([p,u,s],([O,J,K])=>{if(!O)return;const F=we({immediate:!1,escapeDeactivates:K,clickOutsideDeactivates:J,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:a});b=F.activate,_=F.deactivate;const X=F.useFocusTrap(a);return X&&X.destroy?X.destroy:F.deactivate}),P([u,p],([O,J])=>qe(a,{open:J,closeOnInteractOutside:O,onClose(){f()},shouldCloseOnInteractOutside(K){var F;return(F=h.get())==null||F(K),!K.defaultPrevented}}).destroy),P([s],([O])=>O?oe(a,{handler:f}).destroy:T),P([d],([O])=>{Pe().then(()=>{O?b():_()})}));return{destroy:()=>{v(),D()}}}}),Se=S(A("portalled"),{stores:g,returned:a=>({"data-portal":We(a)}),action:a=>{const b=P([g],([_])=>{if(_===null)return T;const D=ze(a,_);return D===null?T:He(a,D).destroy});return{destroy(){b()}}}}),Te=S(A("title"),{stores:[m.title],returned:([a])=>({id:a})}),Ae=S(A("description"),{stores:[m.description],returned:([a])=>({id:a})}),De=S(A("close"),{returned:()=>({type:"button"}),action:a=>({destroy:Y(L(a,"click",()=>{f()}),L(a,"keydown",_=>{_.key!==W.SPACE&&_.key!==W.ENTER||(_.preventDefault(),f())}))})});return P([p,o],([a,b])=>{if(Le){if(b&&a&&(v=je()),a){const _=document.getElementById(m.content.get());le({prop:l.get(),defaultEl:_})}return()=>{r.get()||v()}}}),{ids:m,elements:{content:Fe,trigger:G,title:Te,description:Ae,overlay:Q,close:De,portalled:Se},states:{open:p},options:n}}function Ee(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function xe(t){const{NAME:e,PARTS:n}=Ee(),o=Qe(e,n),s={...Ze({...Ge(t),role:"dialog",forceVisible:!0}),getAttrs:o};return Ne(e,s),{...s,updateOption:Je(s.options)}}function ve(){const{NAME:t}=Ee();return Me(t)}const $e=t=>({ids:t&1}),ie=t=>({ids:t[0]});function et(t){let e;const n=t[12].default,o=I(n,t,t[11],ie);return{c(){o&&o.c()},l(s){o&&o.l(s)},m(s,u){o&&o.m(s,u),e=!0},p(s,[u]){o&&o.p&&(!e||u&2049)&&R(o,n,s,s[11],e?V(n,s[11],u,$e):U(s[11]),ie)},i(s){e||(E(o,s),e=!0)},o(s){C(o,s),e=!1},d(s){o&&o.d(s)}}}function tt(t,e,n){let o,{$$slots:s={},$$scope:u}=e,{preventScroll:i=void 0}=e,{closeOnEscape:g=void 0}=e,{closeOnOutsideClick:r=void 0}=e,{portal:l=void 0}=e,{open:c=void 0}=e,{onOpenChange:h=void 0}=e,{openFocus:k=void 0}=e,{closeFocus:m=void 0}=e,{onOutsideClick:y=void 0}=e;const{states:{open:p},updateOption:d,ids:v}=xe({closeOnEscape:g,preventScroll:i,closeOnOutsideClick:r,portal:l,forceVisible:!0,defaultOpen:c,openFocus:k,closeFocus:m,onOutsideClick:y,onOpenChange:({next:f})=>(c!==f&&(h==null||h(f),n(2,c=f)),f)}),B=ye([v.content,v.description,v.title],([f,G,Q])=>({content:f,description:G,title:Q}));return x(t,B,f=>n(0,o=f)),t.$$set=f=>{"preventScroll"in f&&n(3,i=f.preventScroll),"closeOnEscape"in f&&n(4,g=f.closeOnEscape),"closeOnOutsideClick"in f&&n(5,r=f.closeOnOutsideClick),"portal"in f&&n(6,l=f.portal),"open"in f&&n(2,c=f.open),"onOpenChange"in f&&n(7,h=f.onOpenChange),"openFocus"in f&&n(8,k=f.openFocus),"closeFocus"in f&&n(9,m=f.closeFocus),"onOutsideClick"in f&&n(10,y=f.onOutsideClick),"$$scope"in f&&n(11,u=f.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&c!==void 0&&p.set(c),t.$$.dirty&8&&d("preventScroll",i),t.$$.dirty&16&&d("closeOnEscape",g),t.$$.dirty&32&&d("closeOnOutsideClick",r),t.$$.dirty&64&&d("portal",l),t.$$.dirty&256&&d("openFocus",k),t.$$.dirty&512&&d("closeFocus",m),t.$$.dirty&1024&&d("onOutsideClick",y)},[o,B,c,i,g,r,l,h,k,m,y,u,s]}class vt extends ${constructor(e){super(),ee(this,e,tt,et,Z,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const nt=t=>({builder:t&4}),re=t=>({builder:t[2]}),ot=t=>({builder:t&4}),ce=t=>({builder:t[2]});function st(t){let e,n,o,s;const u=t[8].default,i=I(u,t,t[7],re);let g=[t[2],{type:"button"},t[5]],r={};for(let l=0;l<g.length;l+=1)r=N(r,g[l]);return{c(){e=be("button"),i&&i.c(),this.h()},l(l){e=_e(l,"BUTTON",{type:!0});var c=ge(e);i&&i.l(c),c.forEach(M),this.h()},h(){j(e,r)},m(l,c){H(l,e,c),i&&i.m(e,null),e.autofocus&&e.focus(),t[9](e),n=!0,o||(s=[fe(t[2].action(e)),q(e,"m-click",t[4]),q(e,"m-keydown",t[4])],o=!0)},p(l,c){i&&i.p&&(!n||c&132)&&R(i,u,l,l[7],n?V(u,l[7],c,nt):U(l[7]),re),j(e,r=Oe(g,[c&4&&l[2],{type:"button"},c&32&&l[5]]))},i(l){n||(E(i,l),n=!0)},o(l){C(i,l),n=!1},d(l){l&&M(e),i&&i.d(l),t[9](null),o=!1,de(s)}}}function lt(t){let e;const n=t[8].default,o=I(n,t,t[7],ce);return{c(){o&&o.c()},l(s){o&&o.l(s)},m(s,u){o&&o.m(s,u),e=!0},p(s,u){o&&o.p&&(!e||u&132)&&R(o,n,s,s[7],e?V(n,s[7],u,ot):U(s[7]),ce)},i(s){e||(E(o,s),e=!0)},o(s){C(o,s),e=!1},d(s){o&&o.d(s)}}}function it(t){let e,n,o,s;const u=[lt,st],i=[];function g(r,l){return r[1]?0:1}return e=g(t),n=i[e]=u[e](t),{c(){n.c(),o=w()},l(r){n.l(r),o=w()},m(r,l){i[e].m(r,l),H(r,o,l),s=!0},p(r,[l]){let c=e;e=g(r),e===c?i[e].p(r,l):(he(),C(i[c],1,1,()=>{i[c]=null}),ke(),n=i[e],n?n.p(r,l):(n=i[e]=u[e](r),n.c()),E(n,1),n.m(o.parentNode,o))},i(r){s||(E(n),s=!0)},o(r){C(n),s=!1},d(r){r&&M(o),i[e].d(r)}}}function rt(t,e,n){let o;const s=["asChild","el"];let u=z(e,s),i,{$$slots:g={},$$scope:r}=e,{asChild:l=!1}=e,{el:c=void 0}=e;const{elements:{close:h},getAttrs:k}=ve();x(t,h,d=>n(6,i=d));const m=Ce(),y=k("close");function p(d){pe[d?"unshift":"push"](()=>{c=d,n(0,c)})}return t.$$set=d=>{e=N(N({},e),me(d)),n(5,u=z(e,s)),"asChild"in d&&n(1,l=d.asChild),"el"in d&&n(0,c=d.el),"$$scope"in d&&n(7,r=d.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,o=i),t.$$.dirty&4&&Object.assign(o,y)},[c,l,o,h,m,u,i,r,g,p]}class Ft extends ${constructor(e){super(),ee(this,e,rt,it,Z,{asChild:1,el:0})}}const ct=t=>({builder:t&4}),ue=t=>({builder:t[2]}),ut=t=>({builder:t&4}),ae=t=>({builder:t[2]});function at(t){let e,n,o,s;const u=t[8].default,i=I(u,t,t[7],ue);let g=[t[2],{type:"button"},t[5]],r={};for(let l=0;l<g.length;l+=1)r=N(r,g[l]);return{c(){e=be("button"),i&&i.c(),this.h()},l(l){e=_e(l,"BUTTON",{type:!0});var c=ge(e);i&&i.l(c),c.forEach(M),this.h()},h(){j(e,r)},m(l,c){H(l,e,c),i&&i.m(e,null),e.autofocus&&e.focus(),t[9](e),n=!0,o||(s=[fe(t[2].action(e)),q(e,"m-click",t[4]),q(e,"m-keydown",t[4])],o=!0)},p(l,c){i&&i.p&&(!n||c&132)&&R(i,u,l,l[7],n?V(u,l[7],c,ct):U(l[7]),ue),j(e,r=Oe(g,[c&4&&l[2],{type:"button"},c&32&&l[5]]))},i(l){n||(E(i,l),n=!0)},o(l){C(i,l),n=!1},d(l){l&&M(e),i&&i.d(l),t[9](null),o=!1,de(s)}}}function dt(t){let e;const n=t[8].default,o=I(n,t,t[7],ae);return{c(){o&&o.c()},l(s){o&&o.l(s)},m(s,u){o&&o.m(s,u),e=!0},p(s,u){o&&o.p&&(!e||u&132)&&R(o,n,s,s[7],e?V(n,s[7],u,ut):U(s[7]),ae)},i(s){e||(E(o,s),e=!0)},o(s){C(o,s),e=!1},d(s){o&&o.d(s)}}}function ft(t){let e,n,o,s;const u=[dt,at],i=[];function g(r,l){return r[1]?0:1}return e=g(t),n=i[e]=u[e](t),{c(){n.c(),o=w()},l(r){n.l(r),o=w()},m(r,l){i[e].m(r,l),H(r,o,l),s=!0},p(r,[l]){let c=e;e=g(r),e===c?i[e].p(r,l):(he(),C(i[c],1,1,()=>{i[c]=null}),ke(),n=i[e],n?n.p(r,l):(n=i[e]=u[e](r),n.c()),E(n,1),n.m(o.parentNode,o))},i(r){s||(E(n),s=!0)},o(r){C(n),s=!1},d(r){r&&M(o),i[e].d(r)}}}function _t(t,e,n){let o;const s=["asChild","el"];let u=z(e,s),i,{$$slots:g={},$$scope:r}=e,{asChild:l=!1}=e,{el:c=void 0}=e;const{elements:{trigger:h},getAttrs:k}=ve();x(t,h,d=>n(6,i=d));const m=Ce(),y=k("trigger");function p(d){pe[d?"unshift":"push"](()=>{c=d,n(0,c)})}return t.$$set=d=>{e=N(N({},e),me(d)),n(5,u=z(e,s)),"asChild"in d&&n(1,l=d.asChild),"el"in d&&n(0,c=d.el),"$$scope"in d&&n(7,r=d.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,o=i),t.$$.dirty&4&&Object.assign(o,y)},[c,l,o,h,m,u,i,r,g,p]}class St extends ${constructor(e){super(),ee(this,e,_t,ft,Z,{asChild:1,el:0})}}export{vt as D,St as a,Ft as b,Ze as c,ve as g};

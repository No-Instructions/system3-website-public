import{d as i}from"./index.BUY9SMGD.js";import{n as d,b as l,u as f,k as p}from"./index.B0FfbRil.js";import{u as y}from"./helpers.D6aCnl9l.js";import{c as m,u as b}from"./action.Cp6XCI_P.js";import{u as h}from"./portal.vB7B65qR.js";function F(e){const{open:n,forceVisible:a,activeTrigger:t}=e;return i([n,a,t],([r,s,o])=>(r||s)&&o!==null)}const g={floating:{},focusTrap:{},modal:{},escapeKeydown:{},portal:"body"},K=(e,n)=>{e.dataset.escapee="";const{anchorElement:a,open:t,options:r}=n;if(!a||!t||!r)return{destroy:d};const s={...g,...r},o=[];if(s.portal!==null&&o.push(h(e,s.portal).destroy),o.push(y(a,e,s.floating).destroy),s.focusTrap!==null){const{useFocusTrap:u}=m({immediate:!0,escapeDeactivates:!1,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e,...s.focusTrap});o.push(u(e).destroy)}s.modal!==null&&o.push(b(e,{onClose:()=>{l(a)&&(t.set(!1),a.focus())},shouldCloseOnInteractOutside:u=>!(u.defaultPrevented||l(a)&&a.contains(u.target)),...s.modal}).destroy),s.escapeKeydown!==null&&o.push(f(e,{enabled:t,handler:()=>{t.set(!1)},...s.escapeKeydown}).destroy);const c=p(...o);return{destroy(){c()}}};export{F as d,K as u};

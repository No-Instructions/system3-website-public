import{ad as w,Q as $,s as ee,l as Q,u as V,m as J,o as K,z as H,d as I,A as L,i as X,W as te,c as ne,e as ae,h as se,P as G,D as U,k as D,E as oe,T as re}from"./scheduler.D_DiFEDa.js";import{S as ie,i as le,t as O,a as R,g as ue,f as ce}from"./index.uqldPLAT.js";import{g as fe}from"./spread.CgU5AtxT.js";import{l as ge,t as de,o as pe,w as me,m as S,p as _e,k as W,c as v,b as E,q as N}from"./index.C7oMflsj.js";import{w as be,d as j,a as q}from"./index.BUY9SMGD.js";import{c as he,r as Pe,g as ke}from"./updater.Dth1Bj6g.js";function ye({page:t=1,totalPages:e,siblingCount:n=1}){const a=[],o=new Set([1,e]),g=3+n,l=e-2-n;if(g>l)for(let s=2;s<=e-1;s++)o.add(s);else if(t<g)for(let s=2;s<=Math.min(g,e);s++)o.add(s);else if(t>l)for(let s=e-1;s>=Math.max(l,2);s--)o.add(s);else for(let s=Math.max(t-n,2);s<=Math.min(t+n,e);s++)o.add(s);const m=s=>{a.push({type:"page",value:s,key:`page-${s}`})},u=()=>{a.push({type:"ellipsis",key:`ellipsis-${a.length}`})};let r=0;for(const s of Array.from(o).sort((b,_)=>b-_))s-r>1&&u(),m(s),r=s;return a}const Ce={perPage:1,siblingCount:1,defaultPage:1},{name:T,selector:B}=_e("pagination");function ve(t){const e={...Ce,...t},n=e.page??be(e.defaultPage),a=ge(n,e==null?void 0:e.onPageChange),o=de(pe(e,"page","onPageChange","defaultPage")),{perPage:g,siblingCount:l,count:m}=o,u=me.derived([m,g],([i,f])=>Math.ceil(i/f)),r=j([a,g,m],([i,f,d])=>{const p=(i-1)*f,P=Math.min(p+f,d);return{start:p,end:P}}),s=S(T(),{returned:()=>({"data-scope":"pagination"})}),b=j([a,u,l],([i,f,d])=>ye({page:i,totalPages:f,siblingCount:d})),_=i=>{const f=i.target;if(!E(f))return;const d=f.closest('[data-scope="pagination"]');if(!E(d))return;const p=Array.from(d.querySelectorAll(B("page"))).filter(A=>E(A)),P=d.querySelector(B("prev")),M=d.querySelector(B("next"));E(P)&&p.unshift(P),E(M)&&p.push(M);const C=p.indexOf(f);i.key===N.ARROW_LEFT&&C!==0?(i.preventDefault(),p[C-1].focus()):i.key===N.ARROW_RIGHT&&C!==p.length-1?(i.preventDefault(),p[C+1].focus()):i.key===N.HOME?(i.preventDefault(),p[0].focus()):i.key===N.END&&(i.preventDefault(),p[p.length-1].focus())},h=S(T("page"),{stores:a,returned:i=>f=>({"aria-label":`Page ${f.value}`,"data-value":f.value,"data-selected":f.value===i?"":void 0}),action:i=>({destroy:W(v(i,"click",()=>{const d=i.dataset.value;!d||Number.isNaN(+d)||a.set(Number(d))}),v(i,"keydown",_))})}),k=S(T("prev"),{stores:a,returned:i=>({"aria-label":"Previous",disabled:i<=1}),action:i=>({destroy:W(v(i,"click",()=>{a.update(d=>Math.max(d-1,1))}),v(i,"keydown",_))})}),y=S(T("next"),{stores:[a,u],returned:([i,f])=>({"aria-label":"Next",disabled:i>=f}),action:i=>({destroy:W(v(i,"click",()=>{const d=u.get();a.update(p=>Math.min(p+1,d))}),v(i,"keydown",_))})});return{elements:{root:s,pageTrigger:h,prevButton:k,nextButton:y},states:{range:q(r),page:a,pages:q(b),totalPages:q(u)},options:o}}function Y(){return{NAME:"pagination",PARTS:["root","prev-button","next-button","page"]}}function Ae(t){const{NAME:e,PARTS:n}=Y(),a=he(e,n),o={...ve(Pe(t)),getAttrs:a};return w(e,o),{...o,updateOption:ke(o.options)}}function Ie(){const{NAME:t}=Y();return $(t)}const Ee=t=>({builder:t&4,pages:t&8,range:t&16}),z=t=>({builder:t[2],pages:t[3],range:t[4]}),Me=t=>({builder:t&4,pages:t&8,range:t&16}),F=t=>({builder:t[2],pages:t[3],range:t[4]});function Se(t){let e,n,a,o;const g=t[16].default,l=Q(g,t,t[15],z);let m=[t[2],t[8]],u={};for(let r=0;r<m.length;r+=1)u=H(u,m[r]);return{c(){e=se("div"),l&&l.c(),this.h()},l(r){e=ne(r,"DIV",{});var s=ae(e);l&&l.l(s),s.forEach(I),this.h()},h(){L(e,u)},m(r,s){X(r,e,s),l&&l.m(e,null),t[17](e),n=!0,a||(o=te(t[2].action(e)),a=!0)},p(r,s){l&&l.p&&(!n||s&32796)&&V(l,g,r,r[15],n?K(g,r[15],s,Ee):J(r[15]),z),L(e,u=fe(m,[s&4&&r[2],s&256&&r[8]]))},i(r){n||(R(l,r),n=!0)},o(r){O(l,r),n=!1},d(r){r&&I(e),l&&l.d(r),t[17](null),a=!1,o()}}}function Ne(t){let e;const n=t[16].default,a=Q(n,t,t[15],F);return{c(){a&&a.c()},l(o){a&&a.l(o)},m(o,g){a&&a.m(o,g),e=!0},p(o,g){a&&a.p&&(!e||g&32796)&&V(a,n,o,o[15],e?K(n,o[15],g,Me):J(o[15]),F)},i(o){e||(R(a,o),e=!0)},o(o){O(a,o),e=!1},d(o){a&&a.d(o)}}}function Te(t){let e,n,a,o;const g=[Ne,Se],l=[];function m(u,r){return u[1]?0:1}return e=m(t),n=l[e]=g[e](t),{c(){n.c(),a=G()},l(u){n.l(u),a=G()},m(u,r){l[e].m(u,r),X(u,a,r),o=!0},p(u,[r]){let s=e;e=m(u),e===s?l[e].p(u,r):(ue(),O(l[s],1,1,()=>{l[s]=null}),ce(),n=l[e],n?n.p(u,r):(n=l[e]=g[e](u),n.c()),R(n,1),n.m(a.parentNode,a))},i(u){o||(R(n),o=!0)},o(u){O(n),o=!1},d(u){u&&I(a),l[e].d(u)}}}function Oe(t,e,n){let a;const o=["count","page","onPageChange","perPage","siblingCount","asChild","el"];let g=U(e,o),l,m,u,{$$slots:r={},$$scope:s}=e,{count:b}=e,{page:_=void 0}=e,{onPageChange:h=void 0}=e,{perPage:k=void 0}=e,{siblingCount:y=void 0}=e,{asChild:i=!1}=e,{el:f=void 0}=e;const{elements:{root:d},states:{pages:p,range:P,page:M},getAttrs:C,updateOption:A}=Ae({count:b,perPage:k,siblingCount:y,defaultPage:_,onPageChange:({next:c})=>(_!==c&&(h==null||h(c),n(9,_=c)),c)});D(t,d,c=>n(14,l=c)),D(t,p,c=>n(3,m=c)),D(t,P,c=>n(4,u=c));const Z=C("root");function x(c){re[c?"unshift":"push"](()=>{f=c,n(0,f)})}return t.$$set=c=>{e=H(H({},e),oe(c)),n(8,g=U(e,o)),"count"in c&&n(10,b=c.count),"page"in c&&n(9,_=c.page),"onPageChange"in c&&n(11,h=c.onPageChange),"perPage"in c&&n(12,k=c.perPage),"siblingCount"in c&&n(13,y=c.siblingCount),"asChild"in c&&n(1,i=c.asChild),"el"in c&&n(0,f=c.el),"$$scope"in c&&n(15,s=c.$$scope)},t.$$.update=()=>{t.$$.dirty&512&&_!==void 0&&M.set(_),t.$$.dirty&16384&&n(2,a=l),t.$$.dirty&4&&Object.assign(a,Z),t.$$.dirty&1024&&A("count",b),t.$$.dirty&4096&&A("perPage",k),t.$$.dirty&8192&&A("siblingCount",y)},[f,i,a,m,u,d,p,P,g,_,b,h,k,y,l,s,r,x]}class Le extends ie{constructor(e){super(),le(this,e,Oe,Te,ee,{count:10,page:9,onPageChange:11,perPage:12,siblingCount:13,asChild:1,el:0})}}export{Le as P,Ie as g};
